# 👤 用户使用手册

> 政策知识库系统完整使用指南  
> 阅读时间: 20分钟

---

## 📋 目录

- [快速开始](#快速开始)
- [功能详解](#功能详解)
  - [政策搜索](#1-政策搜索)
  - [智能问答](#2-智能问答)
  - [知识图谱](#3-知识图谱)
  - [语音助手](#4-语音助手)
  - [文档管理](#5-文档管理)
  - [政策分析](#6-政策分析)
- [常见问题](#常见问题)
- [最佳实践](#最佳实践)

---

## 🚀 快速开始

### 访问系统
1. 打开浏览器，访问 `http://localhost:8501`
2. 系统自动加载，显示6个功能页面

### 首次使用建议
```
1. 📄 文档管理 - 查看已上传的政策文档（5分钟）
2. 🔍 政策搜索 - 尝试关键词搜索（5分钟）
3. 💬 智能问答 - 提一个政策问题（5分钟）
4. 🕸️ 知识图谱 - 可视化政策关系（5分钟）
```

---

## 🔍 功能详解

## 1. 政策搜索

### 🎯 适用场景
- 快速查找特定政策
- 按类型、地区、时间筛选
- 批量浏览政策列表

### 📝 使用步骤

#### 基础搜索
1. 在顶部输入框输入关键词（如"财税优惠"）
2. 点击"🔍 搜索"按钮
3. 查看搜索结果列表

**示例**:
```
关键词: "科技创新"
结果: 12条政策
显示: 政策标题、类型、地区、发布日期、摘要
```

---

#### 高级筛选
1. 点击"🔽 高级筛选"展开筛选面板
2. 选择筛选条件:
   - **政策类型**: 财税政策、产业政策、科技政策等
   - **地区**: 全国、广东、北京等
   - **状态**: 有效、过期、即将过期
   - **日期范围**: 开始日期 ~ 结束日期
3. 点击"应用筛选"

**示例**:
```
筛选条件:
- 政策类型: 科技政策
- 地区: 广东
- 状态: 有效
- 日期: 2023-01-01 ~ 2024-12-31

结果: 8条符合条件的政策
```

---

#### 侧边栏快速筛选
右侧侧边栏提供快捷筛选:
- **按政策类型筛选**: 点击标签（如"财税政策"）
- **按地区筛选**: 选择省份/城市
- **按状态筛选**: 有效/过期

---

#### 搜索结果操作
每条政策卡片显示:
- 标题（点击展开详情）
- 类型、地区标签
- 发布日期、有效期
- 摘要（前200字）

**操作按钮**:
- 📖 查看详情 - 展开完整政策内容
- 🔗 在图谱中查看 - 跳转到知识图谱页面

---

### 📊 搜索统计
顶部显示实时统计:
- 总政策数: XX条
- 搜索结果: XX条
- 有效政策: XX条
- 即将过期: XX条

---

## 2. 智能问答

### 🎯 适用场景
- 复杂政策咨询（如"如何申请研发费用加计扣除？"）
- 政策对比（如"广东和北京的人才补贴有什么区别？"）
- 跨文档问答（自动检索多个政策文档）

### 📝 使用步骤

#### 基础问答
1. 在输入框输入问题
2. 点击"发送"或按Enter键
3. 等待AI回答（流式打字效果）

**示例问答**:
```
问题: 小微企业有哪些税收优惠政策？

答案: 根据相关政策，小微企业可享受以下税收优惠：
1. 增值税优惠：月销售额10万元以下免征增值税
2. 企业所得税优惠：年应纳税所得额不超过100万元部分，减按25%计入...
3. 印花税减免：...

📚 参考文档:
[1] 小微企业税收优惠政策.pdf
[2] 财税[2023]12号文.pdf
```

---

#### 查看参考文档
- 答案下方显示**参考文档列表**
- 点击文档名可查看详情（如果已同步到本地数据库）
- 引用编号 `[1]`, `[2]` 可点击跳转到对应文档

---

#### 会话管理
- 系统自动创建会话ID
- 支持多轮对话（AI记住上下文）
- 清除会话: 点击"🗑️ 清除对话"按钮

**多轮对话示例**:
```
第1轮:
用户: 高新技术企业有什么优惠？
AI: 高新技术企业可享受15%的企业所得税优惠...

第2轮:
用户: 申请条件是什么？
AI: (记住上下文) 高新技术企业的申请条件包括：1. 研发费用占比...
```

---

#### 知识图谱联动
- 问答下方显示**相关知识图谱**
- 自动提取问题中的实体（如"高新技术企业"）
- 显示实体在图谱中的关系网络

---

### ⚙️ 高级设置
侧边栏可调整:
- **知识库**: 选择查询的知识库（默认policy_demo_kb）
- **检索文档数**: 返回最相关的N个文档（默认5）
- **相似度阈值**: 文档相关度过滤（0.0-1.0）

---

## 3. 知识图谱

### 🎯 适用场景
- 可视化政策关系网络
- 探索政策之间的关联
- 查找政策影响链路
- 发现政策发布机构

### 📝 使用步骤

#### 构建图谱
首次使用需要构建图谱:
1. 点击"🔨 构建知识图谱"按钮
2. 选择构建模式:
   - **全量构建**: 重新构建所有文档（慢，2-3分钟）
   - **增量构建**: 只处理新文档（快，<1分钟）
3. 等待构建完成
4. 自动显示可视化图谱

**构建进度**:
```
正在构建知识图谱...
处理文档: 10/40
提取实体: 120个
提取关系: 98个
预计剩余时间: 1分30秒
```

---

#### 查看图谱
图谱自动加载，显示:
- **节点**: 代表实体（政策、机构、地区、概念等）
- **边**: 代表关系（发布、适用、引用、影响等）

**节点颜色**:
- 🔵 蓝色 - 政策文档
- 🟢 绿色 - 发布机构
- 🟡 黄色 - 地区
- 🟣 紫色 - 概念/领域
- 🟠 橙色 - 项目/计划

**交互操作**:
- 🖱️ 拖拽节点 - 调整布局
- 🔍 缩放 - 鼠标滚轮放大/缩小
- 👆 点击节点 - 显示详情
- 👆 点击边 - 显示关系类型

---

#### 节点筛选
侧边栏提供筛选功能:
1. **按节点类型筛选**:
   - ☑️ 政策
   - ☑️ 机构
   - ☑️ 地区
   - ☑️ 概念
2. **按关系类型筛选**:
   - ☑️ 发布关系
   - ☑️ 适用关系
   - ☑️ 引用关系

---

#### 图谱搜索
1. 在搜索框输入关键词（如"财政部"）
2. 图谱高亮匹配的节点
3. 自动居中显示

---

#### 路径查询
查找两个实体之间的关系路径:
1. 选择起点节点（下拉框）
2. 选择终点节点
3. 点击"查找路径"
4. 显示最短路径（如果存在）

**示例**:
```
起点: "科技创新政策.pdf"
终点: "科技部"

路径:
科技创新政策.pdf → [发布于] → 科技部
```

---

#### 图谱导出
- 点击"💾 导出图谱"
- 选择格式:
  - JSON格式（完整数据）
  - GraphML格式（支持Gephi等工具）
  - PNG图片（可视化快照）

---

#### 节点详情
点击节点查看详情:
- 节点名称
- 节点类型
- 属性（如政策的发布日期、文号等）
- 关联节点列表（入边、出边）

---

### 📊 图谱统计
顶部显示:
- 总节点数: XX个
- 总边数: XX条
- 最后更新时间: YYYY-MM-DD HH:MM

---

## 4. 语音助手

### 🎯 适用场景
- 语音输入政策问题
- 音频文件转文字
- 语音记录整理

### 📝 使用步骤

#### 上传音频文件
1. 点击"📁 选择音频文件"
2. 支持格式: WAV, MP3, M4A, FLAC, OGG
3. 文件大小限制: 25MB
4. 点击"🎙️ 开始转录"

---

#### 查看转录结果
转录完成后显示:
- 原始文本（可编辑）
- 转录时长
- 识别准确度（如果可用）

**示例**:
```
🎙️ 转录文本:
"请问高新技术企业申请需要满足哪些条件？研发费用占比有什么要求？"

⏱️ 转录时长: 3.2秒
```

---

#### 基于转录内容提问
1. 转录完成后，点击"💬 基于转录内容提问"
2. 系统自动调用问答API
3. 显示答案和参考资料

---

#### 历史记录
侧边栏显示最近10条语音问答记录:
- 时间戳
- 转录文本（前50字）
- 点击查看完整记录

---

### ⚙️ 设置
- **语言**: 中文（默认）、英文
- **模型**: whisper-1（默认）

---

## 5. 文档管理

### 🎯 适用场景
- 查看RAGFlow知识库中的所有文档
- 查看文档分块（chunk）详情
- 检索文档内容
- 触发图谱构建

### 📝 使用步骤

#### 查看文档列表
页面自动加载RAGFlow知识库文档:
- 文档名称
- 大小（KB）
- 分块数（chunks）
- Token数
- 上传时间

**示例**:
```
📄 科技创新政策.pdf
   大小: 1.2 MB
   分块数: 45
   Token数: 12,345
   上传时间: 2024-01-15 10:30
```

---

#### 查看文档分块
1. 点击文档名展开
2. 显示所有分块列表
3. 每个分块显示:
   - 分块ID
   - 内容预览（前200字）
   - Token数

**用途**: 调试RAGFlow分块效果

---

#### 文档检索
1. 在搜索框输入查询词
2. 点击"🔍 检索"
3. 显示最相关的文档分块
4. 按相似度排序

**示例**:
```
查询: "研发费用加计扣除"

结果:
1. 财税政策汇编.pdf - Chunk #3 (相似度: 0.92)
   "...研发费用加计扣除是指企业开展研发活动..."
   
2. 税收优惠指南.pdf - Chunk #7 (相似度: 0.87)
   "...加计扣除比例为75%，科技型中小企业为100%..."
```

---

#### 构建知识图谱
1. 点击"🕸️ 构建知识图谱"按钮
2. 选择构建模式（全量/增量）
3. 等待构建完成
4. 查看构建结果:
   - 处理文档数
   - 提取节点数
   - 提取边数
   - 构建耗时

---

### ⚠️ 注意事项
- 文档上传在RAGFlow Web界面完成（非本系统）
- 本页面只能查看和检索，不能上传/删除文档
- 修改知识库配置需重启系统

---

## 6. 政策分析

### 🎯 适用场景
- 检查政策时效性
- 对比多个政策
- 查看政策发布趋势

### 📝 使用步骤

#### 单个政策分析
1. 选择分析类型: "单个政策分析"
2. 从下拉框选择政策
3. 点击"📊 开始分析"

**分析结果**:
```
📋 政策基本信息
标题: 科技创新政策
类型: 科技政策
地区: 广东
发布机构: 广东省科技厅

⏰ 时效性分析
状态: ✅ 有效
生效日期: 2023-01-01
到期日期: 2025-12-31
剩余有效期: 365天

📈 影响分析
适用对象: 高新技术企业、科技型中小企业
影响范围: 全省
受益企业预计: 10,000+
```

---

#### 政策对比
1. 选择分析类型: "政策对比"
2. 勾选2-5个政策
3. 点击"🔄 对比政策"

**对比维度**:
- 政策类型
- 适用地区
- 有效期
- 发布机构
- 核心内容差异

**示例**:
```
对比: "广东科技创新政策" vs "北京科技创新政策"

相同点:
- 都属于科技政策
- 都支持高新技术企业
- 都包含税收优惠

不同点:
- 广东: 研发费用加计扣除100%
  北京: 研发费用加计扣除75%
  
- 广东: 最高补贴500万
  北京: 最高补贴300万
```

---

#### 趋势分析
1. 选择分析类型: "趋势分析"
2. 选择时间范围（如2023-2024）
3. 选择分析维度（政策类型/地区）

**可视化图表**:
- 政策发布数量趋势（折线图）
- 政策类型分布（饼图）
- 地区分布（柱状图）

---

## ❓ 常见问题

### Q1: 搜索不到政策？
**可能原因**:
1. 关键词不匹配 - 尝试换关键词
2. 筛选条件过严 - 放宽筛选
3. 文档未同步 - 前往"文档管理"页面同步

---

### Q2: 智能问答回答不准确？
**解决方法**:
1. 问题更具体（如"广东省高新技术企业税收优惠"而非"税收优惠"）
2. 调整相似度阈值（侧边栏设置）
3. 增加检索文档数（默认5，可调至10）

---

### Q3: 知识图谱构建失败？
**可能原因**:
1. Qwen API密钥无效 - 检查配置文件
2. RAGFlow服务未启动 - 检查连接
3. 文档内容为空 - 检查文档质量

**排查步骤**:
```bash
# 检查配置
cat config/config.ini | grep QWEN

# 测试RAGFlow连接
curl http://localhost:9380/api/health

# 查看日志
tail -f logs/app.log
```

---

### Q4: 语音转录失败？
**可能原因**:
1. 音频格式不支持 - 转换为WAV/MP3
2. 文件过大 - 压缩或分割
3. Whisper API密钥无效 - 检查配置

---

### Q5: 如何上传新政策文档？
**步骤**:
1. 登录RAGFlow Web界面（http://localhost:9380）
2. 进入知识库管理
3. 上传PDF/DOCX文件
4. 等待RAGFlow自动分块、向量化
5. 回到本系统，前往"文档管理"页面同步

---

## 💡 最佳实践

### 搜索技巧
```
✅ 好的搜索:
- "高新技术企业税收优惠"
- "广东省 AND 科技创新"
- "2023年财税政策"

❌ 不好的搜索:
- "政策"（太泛）
- "优惠"（太短）
```

---

### 问答技巧
```
✅ 好的问题:
- "广东省高新技术企业申请需要满足哪些条件？"
- "研发费用加计扣除的比例是多少？"
- "小微企业和高新技术企业的税收优惠有什么区别？"

❌ 不好的问题:
- "有什么优惠？"（太模糊）
- "政策"（不是问题）
```

---

### 图谱使用建议
1. 定期重建图谱（如每周一次），确保数据最新
2. 使用增量构建节省时间（仅新文档）
3. 导出图谱备份（JSON格式）
4. 通过路径查询发现隐藏关系

---

### 文档管理建议
1. 在RAGFlow上传文档时使用规范命名（如"政策类型_地区_年份.pdf"）
2. 定期清理过期文档
3. 同步文档到本地数据库（便于搜索和分析）

---

## 🔗 相关文档

- [README.md](../README.md) - 项目概览
- [QUICK_START.md](QUICK_START.md) - 5分钟快速开始
- [02-ARCHITECTURE.md](02-ARCHITECTURE.md) - 系统架构
- [06-CONFIGURATION.md](06-CONFIGURATION.md) - 配置说明
- [常见问题汇总](technical/faq.md)

---

## 📞 获取帮助

遇到问题？
1. 查看本文档"常见问题"章节
2. 查看系统日志: `logs/app.log`
3. 联系系统管理员

---

**Last Updated**: 2026-02-01  
**Version**: 1.0  
**For Version**: Investopedia v1.0
