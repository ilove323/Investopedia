# æ”¿ç­–åº“çŸ¥è¯†åº“+çŸ¥è¯†å›¾è°±ç³»ç»Ÿ - å¼€å‘è¿›åº¦æŠ¥å‘Š

> æœ€åæ›´æ–°ï¼š2026-01-24
> å½“å‰é˜¶æ®µï¼šâœ… æ ¸å¿ƒåŠŸèƒ½å®Œæˆ + æ¶æ„ä¼˜åŒ–å®Œæˆ

---

## ğŸ“Š æ•´ä½“è¿›åº¦ç»Ÿè®¡

| æ¨¡å— | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| é…ç½®ç³»ç»Ÿ | âœ… | æ”¯æŒconfig.iniï¼Œè‡ªåŠ¨åˆå§‹åŒ– |
| æ•°æ®åº“ | âœ… | SQLite 5è¡¨ï¼Œè‡ªåŠ¨å»ºè¡¨ |
| å¤–éƒ¨æœåŠ¡ | âœ… | RAGFlow (ç»Ÿä¸€åç«¯) + Whisper |
| ä¸šåŠ¡é€»è¾‘ | âœ… | å…ƒæ•°æ®æå–ã€æ ‡ç­¾ç”Ÿæˆã€æ—¶æ•ˆæ€§æ£€æŸ¥ |
| æ•°æ®æ¨¡å‹ | âœ… | Policyã€Graphã€Tagå®Œæ•´å®ç° |
| æ–‡ä»¶å¤„ç† | âœ… | ç›´æ¥ä¸Šä¼ åˆ°RAGFlowå¤„ç† |
| æ‘˜è¦ç”Ÿæˆ | âœ… | RAGFlow (ä¼˜å…ˆ) + æ–‡æœ¬æˆªå– (å¤‡é€‰) |
| UIç»„ä»¶ | âœ… | 200+è¡Œç»„ä»¶åº“ |
| é¡µé¢åŠŸèƒ½ | âœ… | æœç´¢ã€æ–‡æ¡£ã€å›¾è°±ã€è¯­éŸ³ã€åˆ†æ |
| **æ¶æ„ä¼˜åŒ–** | âœ… | ç§»é™¤å†—ä½™APIè°ƒç”¨å’Œæ–‡ä»¶å¤„ç†åº“ |

---

## âœ… æœ€æ–°ä¼˜åŒ– (2026-01-24)

### 1. ğŸ—‘ï¸ ç§»é™¤åº”ç”¨å±‚DeepSeekç›´æ¥è°ƒç”¨
- **æ–‡ä»¶:** src/utils/summarizer.py
- **å˜æ›´:**
  - åˆ é™¤ `_summarize_with_deepseek()` å‡½æ•° (-99è¡Œ)
  - æ”¹ä¸º RAGFlow-onlyï¼šRAGFlow > æ–‡æœ¬æˆªå–
  - åˆ é™¤é…ç½®æ–‡ä»¶ä¸­çš„å†—ä½™DeepSeekè®¾ç½®
- **åŸå› :** RAGFlowå†…éƒ¨å·²æœ‰deepseek_api_keyé…ç½®ï¼Œæ— éœ€åº”ç”¨å±‚é‡å¤è°ƒç”¨
- **å½±å“:** -2è¡Œé…ç½®ï¼Œä»£ç æ›´ç®€æ´

### 2. ğŸ“¤ æ”¹ä¸ºç›´æ¥ä¸Šä¼ æ–‡ä»¶åˆ°RAGFlow
- **æ–‡ä»¶:** src/pages/documents_page.py
- **å˜æ›´:**
  - åˆ é™¤ `_extract_file_content()` å‡½æ•° (-91è¡Œ)
  - æ”¹ä¸º `ragflow_client.upload_document()`
  - PDF/DOCX/TXTç”±RAGFlowç»Ÿä¸€å¤„ç†
- **æ–°æµç¨‹:** ä¸Šä¼ æ–‡ä»¶ â†’ RAGFlow â†’ doc_id â†’ ä¿å­˜DB
- **å½±å“:** ä»£ç æ›´ç®€æ´ï¼ŒRAGFlowæ›´ä¸“ä¸š

### 3. ğŸ“¦ æ¸…ç†ä¸å¿…è¦çš„ä¾èµ–
- **åˆ é™¤:**
  - âŒ pdfplumber==0.10.3 (PDFæå–)
  - âŒ PyPDF2==3.0.1 (PDFå¤„ç†)
  - âŒ python-docx==0.8.11 (Wordå¤„ç†)
- **ä¿ç•™:** openpyxl==3.1.5 (å…¶ä»–æ¨¡å—å¯èƒ½ä½¿ç”¨)
- **å½±å“:** -3ä¸ªåº“ï¼Œé¡¹ç›®ä½“ç§¯å‡å°‘

---

## âœ… æ ¸å¿ƒBUGä¿®å¤æ¸…å• (ä¹‹å‰)

### 1. ğŸ“„ PDFæ–‡æœ¬æå–ä¿®å¤
- **æ–‡ä»¶:** src/pages/documents_page.py
- **æ–¹å¼:** å·²æ”¹ä¸ºç”±RAGFlowå¤„ç†ï¼ˆä¹‹å‰ä½¿ç”¨pdfplumber/PyPDF2ï¼‰
- **éªŒè¯:** âœ… RAGFlowæ”¯æŒPDF/DOCX/TXTç›´æ¥ä¸Šä¼ 

### 2. ğŸ¤– æ‘˜è¦ç”Ÿæˆä¼˜åŒ–
- **æ–‡ä»¶:** src/utils/summarizer.py
- **ä¿®å¤:**
  - ç§»é™¤é‡å¤ `generate_summary()` å®šä¹‰
  - ç®€åŒ–ä¸ºRAGFlow-onlyæ–¹æ¡ˆ
  - Promptä¿å­˜åœ¨ prompts/summarize_policy.txt
- **éªŒè¯:** âœ… RAGFlowå¯è°ƒç”¨å†…éƒ¨DeepSeek

### 3. ğŸ§  çŸ¥è¯†å›¾è°±ä¿®å¤
- **æ–‡ä»¶:** src/pages/graph_page.py
- **ä¿®å¤:**
  - ä½¿ç”¨æ­£ç¡®çš„GraphNode/GraphEdge API
  - å­—å…¸è®¿é—®: `policy['id']` ä»£æ›¿ `policy.id`
  - æ­£ç¡®å¤„ç† `get_policy_relations()` è¿”å›å€¼
- **éªŒè¯:** âœ… å›¾è°±æ„å»ºæˆåŠŸ (2èŠ‚ç‚¹, 1è¾¹)

---

## ğŸ“ ç³»ç»Ÿæ¶æ„

```
Streamlit Frontend (localhost:8501)
    â”œâ”€â”€ ğŸ“„ documents_page.py
    â”‚   â””â”€â”€ [_extract_file_content] â†’ PDF/DOCX/TXTæ™ºèƒ½æå–
    â”‚       â””â”€â”€ [generate_summary] â†’ DeepSeek/RAGFlow 2çº§åˆ‡æ¢
    â”‚
    â”œâ”€â”€ ğŸ“Š graph_page.py
    â”‚   â””â”€â”€ [build_policy_graph] â†’ NetworkXå›¾è°±æ„å»º
    â”‚       â”œâ”€â”€ [GraphNode] â†’ æ”¿ç­–/æœºå…³/åœ°åŒºèŠ‚ç‚¹
    â”‚       â””â”€â”€ [GraphEdge] â†’ å…³ç³»è¾¹
    â”‚
    â”œâ”€â”€ ğŸ” search_page.py
    â”‚   â””â”€â”€ [PolicyDAO.get_policies] â†’ å­—å…¸åˆ—è¡¨è¿”å›
    â”‚       â””â”€â”€ [render_search_results] â†’ UIå±•ç¤º
    â”‚
    â”œâ”€â”€ ğŸ¤ voice_page.py
    â”‚   â””â”€â”€ Whisper API â†’ è¯­éŸ³è½¬æ–‡å­—
    â”‚       â””â”€â”€ DeepSeek API â†’ é—®ç­”
    â”‚
    â””â”€â”€ ğŸ“ˆ analysis_page.py
        â”œâ”€â”€ ValidityChecker â†’ æ—¶æ•ˆæ€§åˆ†æ
        â””â”€â”€ ImpactAnalyzer â†’ å½±å“åˆ†æ

Database Layer (SQLite)
    â”œâ”€â”€ policies (8åˆ—)
    â”œâ”€â”€ tags (4åˆ—)
    â”œâ”€â”€ policy_tags (2åˆ—)
    â”œâ”€â”€ policy_relations (5åˆ—)
    â””â”€â”€ processing_logs (6åˆ—)

External Services
    â”œâ”€â”€ DeepSeek API â†’ æ‘˜è¦ã€é—®ç­”
    â”œâ”€â”€ RAGFlow (9380) â†’ æ–‡æ¡£å¤„ç†(å¤‡é€‰)
    â””â”€â”€ Whisper (9000) â†’ è¯­éŸ³è¯†åˆ«
```

---

## ğŸ”§ å…³é”®ä»£ç é€»è¾‘

### **æ–‡ä»¶æå–æµç¨‹** (documents_page.py)

```python
def _extract_file_content(uploaded_file):
    """æ ¹æ®æ–‡ä»¶æ‰©å±•åæ™ºèƒ½æå–æ–‡æœ¬"""
    file_ext = uploaded_file.name.split('.')[-1].lower()
    
    if file_ext == 'pdf':
        # ä¼˜å…ˆpdfplumberï¼Œå¤‡é€‰PyPDF2
        with pdfplumber.open(BytesIO(pdf_bytes)) as pdf:
            for page in pdf.pages:
                text += page.extract_text()
    
    elif file_ext == 'docx':
        # ä½¿ç”¨python-docx
        doc = Document(BytesIO(docx_bytes))
        text = "\n".join([para.text for para in doc.paragraphs])
    
    elif file_ext == 'txt':
        # UTF-8 ä¼˜å…ˆï¼ŒGBK å¤‡é€‰
        try:
            return text_bytes.decode('utf-8')
        except UnicodeDecodeError:
            return text_bytes.decode('gbk', errors='ignore')
```

### **æ‘˜è¦ç”Ÿæˆæµç¨‹** (summarizer.py)

```python
def generate_summary(text, max_length=1500):
    """2çº§æ‘˜è¦ç”Ÿæˆ"""
    
    # ç¬¬1çº§ï¼šDeepSeek API
    summary = _summarize_with_deepseek(text, max_length)
    if summary: return summary
    
    # ç¬¬2çº§ï¼šRAGFlow
    summary = _summarize_with_ragflow(text, max_length)
    if summary: return summary
    
    # å›é€€ï¼šæ–‡æœ¬æˆªå–
    return text[:max_length] + "..."
```

**DeepSeekå‚æ•°:**
- model: "deepseek-chat"
- temperature: 0.3 (ä½æ¸©åº¦â†’ä¸€è‡´è¾“å‡º)
- max_tokens: 1200 (è¶³å¤Ÿç©ºé—´)
- top_p: 0.9

**Promptå¼ºåˆ¶è¦æ±‚:**
```
ä½ çš„ä»»åŠ¡æ˜¯æŒ‰ç…§è¦æ±‚ä¸¥æ ¼è¾“å‡º5ä¸ªéƒ¨åˆ†çš„æ‘˜è¦ï¼Œç¼ºä¸€ä¸å¯ã€‚

**æ”¿ç­–ç›®çš„**ï¼š...
**æ ¸å¿ƒå†…å®¹**ï¼š...
**é€‚ç”¨èŒƒå›´**ï¼š...
**å…³é”®æ—¶é—´**ï¼š...
**ä¸»è¦å½±å“**ï¼š...
```

### **å›¾è°±æ„å»ºæµç¨‹** (graph_page.py)

```python
def build_policy_graph():
    """æ„å»ºçŸ¥è¯†å›¾è°±"""
    dao = PolicyDAO()
    policies = dao.get_policies()  # â† è¿”å› List[Dict]!
    
    graph = PolicyGraph()
    
    for policy in policies:
        # âœ… æ­£ç¡®ï¼šå­—å…¸è®¿é—®
        node = GraphNode(
            node_id=f"policy_{policy['id']}",
            label=policy.get('title'),
            node_type=NodeType.POLICY,
            attributes={...}
        )
        graph.add_node(node)
    
    # æ·»åŠ å…³ç³»
    for policy in policies:
        relations = dao.get_policy_relations(policy['id'])
        for rel in relations:  # â† rel ä¹Ÿæ˜¯ Dict!
            edge = GraphEdge(
                source_id=f"policy_{policy['id']}",
                target_id=f"policy_{rel['target_policy_id']}",
                relation_type=rel.get('relation_type')
            )
            graph.add_edge(edge)
```

**å¸¸è§é”™è¯¯ âŒ**
```python
# âŒ é”™è¯¯ï¼šå‡è®¾æ˜¯å¯¹è±¡å±æ€§
for policy in policies:
    policy.id        # AttributeError: 'dict' has no attribute 'id'
    policy.title     # AttributeError
    
graph.add_node(node_id=..., label=...)  # âœ— ä¸æ”¯æŒå…³é”®å­—å‚æ•°
```

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æ“ä½œ | è€—æ—¶ | å¤‡æ³¨ |
|------|------|------|
| PDFæå– (6KB) | <2s | pdfplumberä¼˜åŒ– |
| æ‘˜è¦ç”Ÿæˆ | 3-5s | DeepSeek APIè°ƒç”¨ |
| å›¾è°±æ„å»º (1æ¡æ–‡æ¡£) | <1s | NetworkXé«˜æ•ˆ |
| é¡µé¢åŠ è½½ | <2s | Streamlitç¼“å­˜ |

---

## ğŸš€ æœ€åæ›´æ–°æ—¥æœŸï¼š2026-01-24

**ä¿®å¤çš„æ ¸å¿ƒé—®é¢˜:**
- âœ… PDFäºŒè¿›åˆ¶æ•°æ®æå–
- âœ… æ‘˜è¦ç”Ÿæˆå®Œæ•´æ€§
- âœ… å­—å…¸vså¯¹è±¡è®¿é—®æ··æ·†
- âœ… APIä½¿ç”¨æ–¹å¼è§„èŒƒ
  - è¯¦ç»†çš„ä¸­æ–‡æ–‡æ¡£æ³¨é‡Š âœ…

- âœ… `src/business/tag_generator.py` - å®Œæ•´å®ç° + æ–‡æ¡£æ³¨é‡Š
  - ä¸‰çº§æ ‡ç­¾ä½“ç³» âœ…
  - å…³é”®è¯åŒ¹é… âœ…
  - ç½®ä¿¡åº¦è®¡ç®— âœ…
  - è¯¦ç»†çš„ä¸­æ–‡æ–‡æ¡£æ³¨é‡Š âœ…

- âœ… `src/business/validity_checker.py` - å®Œæ•´å®ç° + æ–‡æ¡£æ³¨é‡Š
  - å¤±æ•ˆæ£€æŸ¥ âœ…
  - æ›¿ä»£å…³ç³»æ£€æŸ¥ âœ…
  - é¢„è­¦æœºåˆ¶ âœ…
  - è¯¦ç»†çš„ä¸­æ–‡æ–‡æ¡£æ³¨é‡Š âœ…

- âœ… `src/business/impact_analyzer.py` - å®Œæ•´å®ç° + æ–‡æ¡£æ³¨é‡Š
  - å½±å“èŒƒå›´åˆ†æ âœ…
  - ç¨‹åº¦è¯„ä¼° âœ…
  - å»ºè®®ç”Ÿæˆ âœ…
  - è¯¦ç»†çš„ä¸­æ–‡æ–‡æ¡£æ³¨é‡Š âœ…

### é˜¶æ®µ4ï¼šæ•°æ®æ¨¡å‹å±‚ (100%)

**å…¨éƒ¨å®Œæˆï¼š**
- âœ… `src/models/policy.py` - å®Œæ•´å®ç°
  - Policyç±» âœ…
  - åºåˆ—åŒ–/ååºåˆ—åŒ– âœ…

- âœ… `src/models/tag.py` - å®Œæ•´å®ç°
  - Tagç±»å’Œå±‚çº§å…³ç³» âœ…

- âœ… `src/models/graph.py` - å®Œæ•´å®ç°
  - NetworkXé›†æˆ âœ…
  - å›¾æ“ä½œ âœ…

### é˜¶æ®µ5ï¼šUIç»„ä»¶å±‚ (100%)

**å…¨éƒ¨å®Œæˆï¼š**
- âœ… `src/components/search_ui.py` - å®Œæ•´å®ç°
  - æœç´¢æ¡†å’Œè¿‡æ»¤é¢æ¿ âœ…
  - æœç´¢ç»Ÿè®¡ âœ…
  - ç»“æœå±•ç¤ºå’Œåˆ†é¡µ âœ…

- âœ… `src/components/graph_ui.py` - å®Œæ•´å®ç°
  - å›¾è°±æ§åˆ¶é¢æ¿ âœ…
  - ç½‘ç»œå›¾æ¸²æŸ“ï¼ˆPyvisï¼‰ âœ…
  - å›¾è¡¨ç»Ÿè®¡ âœ…
  - èŠ‚ç‚¹/è¾¹è¯¦æƒ… âœ…
  - å›¾è°±å¯¼å‡ºåŠŸèƒ½ âœ…

- âœ… `src/components/voice_ui.py` - å®Œæ•´å®ç°
  - è¯­éŸ³è¾“å…¥é€‰æ‹© âœ…
  - è¯­éŸ³è®¾ç½®é¢æ¿ âœ…
  - è½¬å½•ç»“æœå±•ç¤º âœ…
  - é—®ç­”ç»“æœå±•ç¤º âœ…
  - è¯­éŸ³å†å²è®°å½• âœ…
  - ä½¿ç”¨æç¤ºå’Œç»Ÿè®¡ âœ…

- âœ… `src/components/policy_card.py` - å®Œæ•´å®ç°
  - æ”¿ç­–å¡ç‰‡å±•ç¤º âœ…
  - æ”¿ç­–è¯¦æƒ…é¡µ âœ…
  - æ”¿ç­–åˆ—è¡¨å±•ç¤º âœ…
  - æ”¿ç­–ç¼–è¾‘è¡¨å• âœ…

### é˜¶æ®µ6ï¼šé¡µé¢æ¨¡å—å±‚ (100%)

**å…¨éƒ¨å®Œæˆï¼š**
- âœ… `src/pages/search_page.py` - å®Œæ•´å®ç°
  - å…³é”®è¯æœç´¢å’Œé«˜çº§è¿‡æ»¤ âœ…
  - æœç´¢ç»“æœåˆ†é¡µå±•ç¤º âœ…
  - RAGFlowé›†æˆ âœ…
  - æœç´¢ç»Ÿè®¡ä¿¡æ¯ âœ…

- âœ… `src/pages/documents_page.py` - å®Œæ•´å®ç°
  - æ–‡æ¡£ä¸Šä¼ åŠŸèƒ½ âœ…
  - æ–‡æ¡£åˆ—è¡¨å±•ç¤º âœ…
  - ç¼–è¾‘å’Œåˆ é™¤æ“ä½œ âœ…
  - æ—¶æ•ˆæ€§çŠ¶æ€æ˜¾ç¤º âœ…
  - å³å°†å¤±æ•ˆæ–‡æ¡£è­¦å‘Š âœ…

- âœ… `src/pages/graph_page.py` - å®Œæ•´å®ç°
  - çŸ¥è¯†å›¾è°±æ„å»ºï¼ˆPolicyGraph + å‘è¡Œæœºå…³ + åœ°åŒºï¼‰ âœ…
  - å›¾è°±å¯è§†åŒ–ï¼ˆPyvisæ¸²æŸ“ï¼‰ âœ…
  - å›¾è¡¨ç»Ÿè®¡æ˜¾ç¤º âœ…
  - èŠ‚ç‚¹å’Œè¾¹è¯¦æƒ…æŸ¥çœ‹ âœ…
  - å…³ç³»è¯¦æƒ…å±•ç¤º âœ…

- âœ… `src/pages/voice_page.py` - å®Œæ•´å®ç°
  - å®æ—¶å½•éŸ³å’Œæ–‡ä»¶ä¸Šä¼  âœ…
  - è¯­éŸ³è®¾ç½®é¢æ¿ âœ…
  - éŸ³é¢‘è½¬æ–‡å­—ï¼ˆWhisperé›†æˆï¼‰ âœ…
  - é—®ç­”åŠŸèƒ½ âœ…
  - å†å²è®°å½•å±•ç¤º âœ…
  - ä½¿ç”¨æç¤ºå’Œç»Ÿè®¡ä¿¡æ¯ âœ…

- âœ… `src/pages/analysis_page.py` - å®Œæ•´å®ç°
  - å•ä¸ªæ”¿ç­–å½±å“åˆ†æ âœ…
  - æ”¿ç­–å¯¹æ¯”åˆ†æ âœ…
  - ç›¸ä¼¼åº¦è®¡ç®— âœ…
  - è¶‹åŠ¿ç»Ÿè®¡åˆ†æ âœ…
  - æ•°æ®å¯è§†åŒ–ï¼ˆå›¾è¡¨ï¼‰ âœ…

### é˜¶æ®µ7ï¼šä¸»åº”ç”¨å…¥å£ (60%)

**çŠ¶æ€ï¼š**
- âœ… `app.py` - æ¡†æ¶å®Œæ•´ä½†éœ€è¦ä¿®å¤
  - é¡µé¢ç»“æ„å®Œæˆ âœ…
  - ä¾§è¾¹æ è®¾è®¡å®Œæˆ âœ…
  - å¯¼èˆªèœå•å®Œæˆ âœ…
  - âš ï¸ **éœ€è¦ä¿®å¤**ï¼šè¿˜åœ¨ä½¿ç”¨æ—§çš„ `config.app_config` å¯¼å…¥ï¼Œéœ€è¦æ”¹ä¸º `src.config.get_config()`

### é˜¶æ®µ8ï¼šå·¥å…·å‡½æ•° (100%)

**å…¨éƒ¨å®Œæˆï¼š**
- âœ… `src/utils/logger.py` - å®Œæ•´å®ç°
- âœ… `src/utils/file_utils.py` - å®Œæ•´å®ç°
- âœ… `src/utils/text_utils.py` - å®Œæ•´å®ç°

---

## ğŸ”´ å¾…å®Œæˆå·¥ä½œè¯¦è¿°

### ä¼˜å…ˆçº§1ï¼ˆå¿…é¡»ï¼‰- å…³é”®é—®é¢˜ä¿®å¤

#### 1.1 ä¿®å¤ app.py é…ç½®å¯¼å…¥
**æ–‡ä»¶ï¼š** `app.py`
**é—®é¢˜ï¼š** è¿˜åœ¨å¯¼å…¥ `config.app_config`ï¼ˆå·²åˆ é™¤ï¼‰
**è§£å†³æ–¹æ¡ˆï¼š**
```python
# æ—§æ–¹å¼ï¼ˆé”™è¯¯ï¼‰
from config.app_config import APP_NAME, APP_DESCRIPTION, ...

# æ–°æ–¹å¼ï¼ˆæ­£ç¡®ï¼‰
from src.config import get_config
config = get_config()
APP_NAME = config.app_name
APP_DESCRIPTION = config.app_description
```
**æ‰€éœ€æ”¹åŠ¨ï¼š** çº¦20-30è¡Œä»£ç çš„é‡å†™

#### 1.2 éªŒè¯ db_manager.py å’Œ policy_dao.py å…¼å®¹æ€§
**æ–‡ä»¶ï¼š** `src/database/db_manager.py`, `src/database/policy_dao.py`
**é—®é¢˜ï¼š** è¿™äº›æ–‡ä»¶æ˜¯å¦å·²ç»å…¼å®¹æ–°çš„ConfigLoader
**éœ€è¦ï¼š** æ£€æŸ¥å¹¶æ›´æ–°ä»»ä½• `config.app_config` çš„å¯¼å…¥

#### 1.3 æ·»åŠ ä»£ç æ³¨é‡Šï¼ˆå…¨éƒ¨å®ç°æ–‡ä»¶ï¼‰
**èŒƒå›´ï¼š** æ‰€æœ‰å·²å®Œæˆå®ç°çš„æ–‡ä»¶
**è¦æ±‚ï¼š**
- æ¯ä¸ªæ–‡ä»¶é¡¶éƒ¨ï¼šè¯´æ˜è¿™ä¸ªæ–‡ä»¶çš„ä½œç”¨ï¼ˆä¸­æ–‡ï¼‰
- æ¯ä¸ªå‡½æ•°ï¼šè¯´æ˜å…¥å‚ã€å‡ºå‚ã€åŠŸèƒ½ã€é€»è¾‘
- æ¯æ®µå…³é”®é€»è¾‘ï¼šè¯¦ç»†æ³¨é‡Š
- æ¯ä¸ªé‡è¦è¡Œï¼šç»†èŠ‚æ³¨é‡Š

### ä¼˜å…ˆçº§1.1 (å·²ä¿®å¤) - æ–‡æ¡£ä¸Šä¼ UNIQUEçº¦æŸé”™è¯¯

#### BUG-FIX-001: UNIQUE constraint failed: policies.document_number

**é—®é¢˜æè¿°ï¼š**
ä¸Šä¼ æ–‡æ¡£åå‡ºç°é”™è¯¯ï¼š`UNIQUE constraint failed: policies.document_number`
- åŸå› 1ï¼šdocument_numberå­—æ®µå…è®¸NULLå€¼ï¼Œå¤šä¸ªNULLè¢«è§†ä¸ºè¿åå”¯ä¸€æ€§çº¦æŸ
- åŸå› 2ï¼šæ²¡æœ‰åœ¨ä¸Šä¼ å‰æ£€æŸ¥æ–‡å·æ˜¯å¦å·²å­˜åœ¨

**ä¿®å¤å†…å®¹ï¼š**
1. **ä¿®æ”¹ documents_page.py** - æ·»åŠ å‰ç«¯éªŒè¯
   - åœ¨æäº¤å‰æ£€æŸ¥document_numberçš„å”¯ä¸€æ€§
   - å°†ç©ºå­—ç¬¦ä¸²è½¬æ¢ä¸ºNoneè€Œä¸æ˜¯æäº¤ç©ºå€¼
   - ç»™å‡ºå‹å¥½çš„é”™è¯¯æç¤º
   - æ·»åŠ ValueErrorå¼‚å¸¸æ•è·

2. **ä¿®æ”¹ policy_dao.py** - å¢å¼ºcreate_policyæ–¹æ³•
   - åœ¨æ’å…¥å‰æ£€æŸ¥æ–‡å·æ˜¯å¦é‡å¤
   - å°†ç©ºå­—ç¬¦ä¸²è§„èŒƒåŒ–ä¸ºNone
   - æ·»åŠ è¯¦ç»†çš„æ—¥å¿—è®°å½•
   - æŠ›å‡ºValueErrorè€Œä¸æ˜¯æ•°æ®åº“å¼‚å¸¸

3. **ä¿®æ”¹ schema.sql** - çº¦æŸæ£€æŸ¥
   - ç¡®ä¿document_numberè®¾ç½®ä¸ºUNIQUEä¸”å…è®¸NULL

**ä¿®æ”¹æ–‡ä»¶ï¼š**
- âœ… `src/pages/documents_page.py`ï¼ˆç¬¬60-95è¡Œï¼‰
  - æ·»åŠ è¡¨å•éªŒè¯é€»è¾‘
  - æ£€æŸ¥document_numberå”¯ä¸€æ€§
  - è§„èŒƒåŒ–NULLå€¼å¤„ç†
  - æ”¹è¿›é”™è¯¯æ•è·å’Œå±•ç¤º

- âœ… `src/database/policy_dao.py`ï¼ˆcreate_policyæ–¹æ³•ï¼‰
  - æ·»åŠ document_numberé‡å¤æ£€æŸ¥
  - å®Œå–„æ–‡æ¡£æ³¨é‡Š
  - æ”¹è¿›æ—¥å¿—è®°å½•

**ç¼–ç è§„èŒƒéµå¾ªï¼š**
- âœ… å‡½æ•°æ³¨é‡ŠåŒ…å«Argsã€Returnsã€Raises
- âœ… é”™è¯¯æ¶ˆæ¯ä½¿ç”¨ä¸­æ–‡å’Œemoji
- âœ… å˜é‡åä½¿ç”¨snake_case
- âœ… å¼‚å¸¸å¤„ç†åˆ†å±‚ï¼ˆValueError > Exceptionï¼‰

**æµ‹è¯•æ–¹æ³•ï¼š**
```bash
# 1. ä¸Šä¼ ç›¸åŒæ–‡å·çš„æ–‡æ¡£ -> åº”æ˜¾ç¤º"æ–‡å·å·²å­˜åœ¨"é”™è¯¯
# 2. ä¸Šä¼ æ–‡å·ä¸ºç©ºçš„æ–‡æ¡£ -> åº”æ˜¾ç¤ºè­¦å‘Šä½†å…è®¸ç»§ç»­
# 3. ä¸Šä¼ æ–°çš„æ–‡å· -> åº”æˆåŠŸä¸Šä¼ 
```

**å½±å“èŒƒå›´ï¼š**
- æ–‡æ¡£ä¸Šä¼ åŠŸèƒ½ç°å·²ç¨³å®šï¼Œä¸ä¼šå› é‡å¤æ–‡å·è€Œå´©æºƒ
- ç”¨æˆ·è·å¾—æ¸…æ™°çš„é”™è¯¯åé¦ˆ
- æ•°æ®åº“å®Œæ•´æ€§å¾—åˆ°ä¿è¯

### ä¼˜å…ˆçº§2ï¼ˆä½ï¼‰- æµ‹è¯•å’Œæ–‡æ¡£

#### 2.1 å•å…ƒæµ‹è¯•
**æ–‡ä»¶ï¼š** `tests/` ç›®å½•
- æœåŠ¡å±‚æµ‹è¯•
- ä¸šåŠ¡é€»è¾‘æµ‹è¯•
- æ•°æ®åº“å±‚æµ‹è¯•

#### 2.2 é›†æˆæµ‹è¯•
- ç«¯åˆ°ç«¯æµç¨‹æµ‹è¯•

#### 2.3 é¡¹ç›®æ–‡æ¡£
- APIæ–‡æ¡£
- éƒ¨ç½²æŒ‡å—æ›´æ–°
- å¼€å‘æŒ‡å—

---

## âœ… å·²å®Œæˆå·¥ä½œ

### é¡µé¢æ¨¡å—å®ç°å®Œæˆï¼ˆTASK-2.1-2.5ï¼‰
- âœ… **search_page.py** - å…³é”®è¯æœç´¢ã€é«˜çº§è¿‡æ»¤ã€ç»“æœåˆ†é¡µ
- âœ… **documents_page.py** - æ–‡ä»¶ä¸Šä¼ ã€åˆ—è¡¨ç®¡ç†ã€ç¼–è¾‘åˆ é™¤
- âœ… **graph_page.py** - çŸ¥è¯†å›¾è°±å¯è§†åŒ–ã€èŠ‚ç‚¹å…³ç³»å±•ç¤º
- âœ… **voice_page.py** - éŸ³é¢‘è¾“å…¥ã€è½¬æ–‡å­—ã€é—®ç­”ã€å†å²è®°å½•
- âœ… **analysis_page.py** - å•ä¸ªåˆ†æã€æ”¿ç­–å¯¹æ¯”ã€è¶‹åŠ¿ç»Ÿè®¡

### UIç»„ä»¶å®ç°å®Œæˆï¼ˆTASK-3.1-3.3ï¼‰
- âœ… **voice_ui.py** - è¯­éŸ³è¾“å…¥UIç»„ä»¶
- âœ… **policy_card.py** - æ”¿ç­–å¡ç‰‡ç»„ä»¶
- âœ… **search_ui.py** - æœç´¢é¢æ¿ç»„ä»¶
- âœ… **graph_ui.py** - å›¾è°±æ§åˆ¶ç»„ä»¶

---

## ğŸ“‹ è¯¦ç»†TODO List

### Phase 1ï¼šé…ç½®å’Œä¿®å¤ï¼ˆ1-2 å°æ—¶ï¼‰

- [ ] **ä»»åŠ¡1.1** - ä¿®å¤ app.py é…ç½®å¯¼å…¥
  - [ ] æ›¿æ¢æ‰€æœ‰ `config.app_config` å¯¼å…¥ä¸º `src.config.get_config()`
  - [ ] æµ‹è¯•åº”ç”¨å¯åŠ¨
  - [ ] éªŒè¯Streamlité¡µé¢æ­£å¸¸æ˜¾ç¤º
  - **æ–‡ä»¶**ï¼š`app.py`
  - **ä»£ç é‡**ï¼šçº¦30è¡Œä¿®æ”¹

- [ ] **ä»»åŠ¡1.2** - éªŒè¯ db_manager.py å’Œ policy_dao.py å…¼å®¹æ€§
  - [ ] æ£€æŸ¥æ˜¯å¦æœ‰ `config.app_config` å¯¼å…¥
  - [ ] æ›´æ–°ä¸ºæ–°çš„é…ç½®ç³»ç»Ÿ
  - [ ] éªŒè¯æ•°æ®åº“è¿æ¥
  - **æ–‡ä»¶**ï¼š`src/database/db_manager.py`, `src/database/policy_dao.py`
  - **ä»£ç é‡**ï¼šçº¦10-20è¡Œä¿®æ”¹

### Phase 2ï¼šä»£ç æ³¨é‡Šå’Œä¼˜åŒ–ï¼ˆ3-4 å°æ—¶ï¼‰

å¯¹æ‰€æœ‰å·²å®Œæˆå®ç°çš„æ–‡ä»¶æ·»åŠ è¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šã€‚

- [ ] **ä»»åŠ¡2.1** - ç»™ src/config/ åŠ æ³¨é‡Š
  - [ ] `config_loader.py` - è¯¦ç»†è¯´æ˜ConfigLoaderçš„å·¥ä½œæµç¨‹
  - [ ] æ¯ä¸ªpropertyè¯´æ˜å‚æ•°å’Œè¿”å›å€¼
  - [ ] å…³é”®é€»è¾‘ï¼ˆå¦‚ç¯å¢ƒå˜é‡è¦†ç›–ï¼‰åŠ ç»†èŠ‚æ³¨é‡Š

- [ ] **ä»»åŠ¡2.2** - ç»™ src/services/ åŠ æ³¨é‡Š
  - [ ] `ragflow_client.py` - RAGFlowæ¥å£ã€é”™è¯¯å¤„ç†ã€é‡è¯•æœºåˆ¶
  - [ ] `whisper_client.py` - Whisperæ¥å£ã€éŸ³é¢‘å¤„ç†
  - [ ] `api_utils.py` - HTTPå·¥å…·å‡½æ•°

- [ ] **ä»»åŠ¡2.3** - ç»™ src/business/ åŠ æ³¨é‡Š
  - [ ] `metadata_extractor.py` - å…ƒæ•°æ®æå–è§„åˆ™å’Œé€»è¾‘
  - [ ] `tag_generator.py` - æ ‡ç­¾ç”Ÿæˆç®—æ³•
  - [ ] `validity_checker.py` - æ—¶æ•ˆæ€§æ£€æŸ¥é€»è¾‘
  - [ ] `impact_analyzer.py` - å½±å“åˆ†æé€»è¾‘

- [ ] **ä»»åŠ¡2.4** - ç»™ src/models/ åŠ æ³¨é‡Š
  - [ ] `policy.py` - æ•°æ®æ¨¡å‹ç»“æ„
  - [ ] `tag.py` - æ ‡ç­¾å±‚çº§å…³ç³»
  - [ ] `graph.py` - å›¾æ“ä½œ

- [ ] **ä»»åŠ¡2.5** - ç»™ src/database/ åŠ æ³¨é‡Š
  - [ ] `db_manager.py` - æ•°æ®åº“ç®¡ç†ã€è¿æ¥æ± 
  - [ ] `policy_dao.py` - æ•°æ®è®¿é—®å¯¹è±¡ã€SQLæ“ä½œ
  - [ ] `schema.sql` - è¡¨ç»“æ„å’Œå­—æ®µè¯´æ˜

- [ ] **ä»»åŠ¡2.6** - ç»™ src/utils/ åŠ æ³¨é‡Š
  - [ ] `logger.py` - æ—¥å¿—é…ç½®å’Œä½¿ç”¨
  - [ ] `file_utils.py` - æ–‡ä»¶æ“ä½œ
  - [ ] `text_utils.py` - æ–‡æœ¬å¤„ç†

- [ ] **ä»»åŠ¡2.7** - ç»™ src/components/ åŠ æ³¨é‡Š
  - [ ] `search_ui.py` - UIç»„ä»¶è¯´æ˜
  - [ ] `graph_ui.py` - å›¾è°±æ¸²æŸ“è¯´æ˜

- [ ] **ä»»åŠ¡2.8** - ä¿®å¤ app.py æ³¨é‡Š
  - [ ] æ›´æ–°å¯¼å…¥è¯´æ˜
  - [ ] å‡½æ•°åŠŸèƒ½è¯´æ˜
  - [ ] çŠ¶æ€ç®¡ç†è¯´æ˜

### Phase 3ï¼šé¡µé¢å®ç°ï¼ˆ8-10 å°æ—¶ï¼‰

æŒ‰ä¼˜å…ˆçº§é¡ºåºå®ç°5ä¸ªé¡µé¢ã€‚

- [ ] **ä»»åŠ¡3.1** - å®ç° search_page.py ï¼ˆä¼˜å…ˆçº§æœ€é«˜ï¼‰
  - [ ] æ„å»ºæœç´¢UIå¸ƒå±€
  - [ ] å®ç°æœç´¢è¿‡æ»¤é€»è¾‘
  - [ ] é›†æˆRAGFlowæœç´¢
  - [ ] ç»“æœå±•ç¤ºå’Œåˆ†é¡µ
  - [ ] è¯¦æƒ…é¢æ¿
  - **é¢„æœŸä»£ç é‡**ï¼š150-200è¡Œ
  - **æ‰€éœ€æ³¨é‡Š**ï¼šæ¯æ®µé€»è¾‘éƒ½è¦è¯´æ˜

- [ ] **ä»»åŠ¡3.2** - å®ç° documents_page.py ï¼ˆä¼˜å…ˆçº§æ¬¡é«˜ï¼‰
  - [ ] æ–‡ä»¶ä¸Šä¼ ç»„ä»¶
  - [ ] æ ¼å¼å’Œå¤§å°éªŒè¯
  - [ ] å¤„ç†æµç¨‹ç¼–æ’
  - [ ] æ–‡æ¡£åˆ—è¡¨å±•ç¤º
  - [ ] æ‰¹é‡æ“ä½œ
  - [ ] å¤„ç†æ—¥å¿—
  - **é¢„æœŸä»£ç é‡**ï¼š200-250è¡Œ
  - **æ‰€éœ€æ³¨é‡Š**ï¼šé‡ç‚¹æ˜¯å¤„ç†æµç¨‹

- [ ] **ä»»åŠ¡3.3** - å®ç° graph_page.py
  - [ ] å›¾æ•°æ®åŠ è½½
  - [ ] NetworkXå›¾æ„å»º
  - [ ] Pyvisæ¸²æŸ“
  - [ ] äº¤äº’æ§åˆ¶
  - [ ] å¯¼å‡ºåŠŸèƒ½
  - **é¢„æœŸä»£ç é‡**ï¼š180-220è¡Œ
  - **æ‰€éœ€æ³¨é‡Š**ï¼šå›¾æ“ä½œå’Œæ¸²æŸ“é€»è¾‘

- [ ] **ä»»åŠ¡3.4** - å®ç° voice_page.py
  - [ ] éŸ³é¢‘è¾“å…¥æ–¹å¼
  - [ ] è¯­éŸ³å¤„ç†æµç¨‹
  - [ ] é—®ç­”é€»è¾‘
  - [ ] å†å²è®°å½•
  - **é¢„æœŸä»£ç é‡**ï¼š160-200è¡Œ
  - **æ‰€éœ€æ³¨é‡Š**ï¼šè¯­éŸ³å¤„ç†ç®¡é“

- [ ] **ä»»åŠ¡3.5** - å®ç° analysis_page.py
  - [ ] æ—¶æ•ˆæ€§åˆ†æ
  - [ ] å½±å“åˆ†æ
  - [ ] è¶‹åŠ¿ç»Ÿè®¡
  - [ ] æ•°æ®è¡¨å±•ç¤º
  - **é¢„æœŸä»£ç é‡**ï¼š150-200è¡Œ
  - **æ‰€éœ€æ³¨é‡Š**ï¼šæ•°æ®åˆ†æé€»è¾‘

### Phase 4ï¼šUIç»„ä»¶å®Œæ•´å®ç°ï¼ˆ2-3 å°æ—¶ï¼‰

- [ ] **ä»»åŠ¡4.1** - å®Œæ•´å®ç° voice_ui.py
  - [ ] å½•éŸ³æŒ‰é’®å’Œæ§åˆ¶
  - [ ] æ³¢å½¢å¯è§†åŒ–
  - [ ] æ–‡ä»¶ä¸Šä¼ 
  - [ ] è®¾ç½®é¢æ¿
  - **é¢„æœŸä»£ç é‡**ï¼š80-120è¡Œ

- [ ] **ä»»åŠ¡4.2** - å®Œæ•´å®ç° policy_card.py
  - [ ] å¡ç‰‡å¸ƒå±€
  - [ ] ä¿¡æ¯å±•ç¤º
  - [ ] æ ‡ç­¾å’ŒçŠ¶æ€
  - [ ] æ“ä½œæŒ‰é’®
  - **é¢„æœŸä»£ç é‡**ï¼š60-100è¡Œ

- [ ] **ä»»åŠ¡4.3** - å¢å¼º search_ui.py å’Œ graph_ui.py
  - [ ] é«˜çº§æœç´¢é¢æ¿
  - [ ] æ›´å¤šäº¤äº’
  - [ ] æ€§èƒ½ä¼˜åŒ–
  - **é¢„æœŸä»£ç é‡**ï¼š100-150è¡Œ

### Phase 5ï¼šæµ‹è¯•ï¼ˆ1-2 å°æ—¶ï¼‰

- [ ] **ä»»åŠ¡5.1** - æ‰‹å·¥æµ‹è¯•æ‰€æœ‰é¡µé¢
  - [ ] æœç´¢åŠŸèƒ½æµ‹è¯•
  - [ ] æ–‡æ¡£ä¸Šä¼ æµ‹è¯•
  - [ ] å›¾è°±æ¸²æŸ“æµ‹è¯•
  - [ ] è¯­éŸ³é—®ç­”æµ‹è¯•
  - [ ] åˆ†æé¡µé¢æµ‹è¯•

- [ ] **ä»»åŠ¡5.2** - éªŒè¯å¤–éƒ¨æœåŠ¡é›†æˆ
  - [ ] RAGFlowè¿æ¥æµ‹è¯•
  - [ ] Whisperè¿æ¥æµ‹è¯•
  - [ ] æ•°æ®åº“æ“ä½œæµ‹è¯•

### Phase 6ï¼šæ–‡æ¡£å®Œå–„ï¼ˆ1-2 å°æ—¶ï¼‰

- [ ] **ä»»åŠ¡6.1** - æ›´æ–° README.md
  - [ ] æ·»åŠ åŠŸèƒ½è¯´æ˜
  - [ ] æ·»åŠ ä½¿ç”¨ç¤ºä¾‹
  - [ ] æ·»åŠ æ•…éšœæ’é™¤

- [ ] **ä»»åŠ¡6.2** - åˆ›å»º API æ–‡æ¡£
  - [ ] å„æœåŠ¡çš„APIè¯´æ˜
  - [ ] æ•°æ®æ¨¡å‹è¯´æ˜
  - [ ] ä½¿ç”¨ç¤ºä¾‹

- [ ] **ä»»åŠ¡6.3** - åˆ›å»º DEVELOPMENT.md
  - [ ] å¼€å‘ç¯å¢ƒè®¾ç½®
  - [ ] ä»£ç ç»“æ„è¯´æ˜
  - [ ] æ‰©å±•æŒ‡å—

---

## ğŸ¯ åç»­å¼€å‘è·¯çº¿

### çŸ­æœŸï¼ˆ1-2å‘¨ï¼‰
1. âœ… é…ç½®ç³»ç»Ÿä¿®å¤å’ŒéªŒè¯
2. âœ… ä»£ç æ³¨é‡Šå’Œæ–‡æ¡£å®Œå–„
3. âœ… 5ä¸ªé¡µé¢æ¨¡å—å®ç°
4. âœ… UIç»„ä»¶å®Œæ•´å®ç°
5. âœ… æ‰‹å·¥æµ‹è¯•

### ä¸­æœŸï¼ˆ2-3å‘¨ï¼‰
1. å•å…ƒæµ‹è¯•ç¼–å†™
2. é›†æˆæµ‹è¯•
3. æ€§èƒ½ä¼˜åŒ–
4. é”™è¯¯å¤„ç†å¢å¼º
5. æ—¥å¿—å®Œå–„

### é•¿æœŸ
1. Dockerå®¹å™¨åŒ–
2. è‡ªåŠ¨åŒ–éƒ¨ç½²
3. ç›‘æ§å’Œå‘Šè­¦
4. åŠŸèƒ½æ‰©å±•ï¼ˆå¦‚æ›´å¤šæ•°æ®æºæ”¯æŒï¼‰

---

## ğŸ“Œ å…³é”®æ³¨æ„äº‹é¡¹

### ä»£ç æ³¨é‡Šæ ‡å‡†
æ¯ä¸ªPythonæ–‡ä»¶åº”éµå¾ªä»¥ä¸‹æ ¼å¼ï¼š

```python
"""
æ¨¡å—è¯´æ˜
--------
ç®€è¦æè¿°è¿™ä¸ªæ–‡ä»¶æ˜¯åšä»€ä¹ˆçš„ï¼ˆä¸­æ–‡ï¼‰ã€‚

åŠŸèƒ½åˆ—è¡¨ï¼š
- åŠŸèƒ½1ï¼šè¯´æ˜
- åŠŸèƒ½2ï¼šè¯´æ˜
- åŠŸèƒ½3ï¼šè¯´æ˜

ä¾èµ–ï¼š
- æ¨¡å—Aï¼šä¸ºä»€ä¹ˆéœ€è¦
- æ¨¡å—Bï¼šä¸ºä»€ä¹ˆéœ€è¦

ä½¿ç”¨ç¤ºä¾‹ï¼š
    from src.xxx import xxx
    result = xxx()
"""

# å¯¼å…¥éƒ¨åˆ†
import xxx

# å¸¸é‡å®šä¹‰
MAX_SIZE = 100  # æœ€å¤§å°ºå¯¸é™åˆ¶ï¼Œç”¨äºxxxæ“ä½œ

class MyClass:
    """ç±»è¯´æ˜

    è¿™ä¸ªç±»çš„ä½œç”¨æ˜¯...

    Attributes:
        attr1 (str): å±æ€§1çš„è¯´æ˜
        attr2 (int): å±æ€§2çš„è¯´æ˜

    Example:
        >>> obj = MyClass()
        >>> obj.do_something()
    """

    def __init__(self):
        # åˆå§‹åŒ–é€»è¾‘è¯´æ˜
        self.attr1 = ""
        self.attr2 = 0

    def important_method(self):
        """æ–¹æ³•è¯´æ˜

        è¯¦ç»†çš„åŠŸèƒ½æè¿°...

        Returns:
            str: è¿”å›å€¼è¯´æ˜

        Raises:
            ValueError: ä»€ä¹ˆæƒ…å†µä¸‹æŠ›å‡ºè¿™ä¸ªé”™è¯¯
        """
        # é‡è¦é€»è¾‘çš„è¯¦ç»†æ³¨é‡Š
        # ä¸ºä»€ä¹ˆè¿™æ ·åšï¼Œä¸æ˜¯æ€æ ·åš
        result = self._process_data()
        return result

    def _process_data(self):
        # è¿™ä¸ªç§æœ‰æ–¹æ³•çš„ä½œç”¨æ˜¯...
        # å…³é”®æ­¥éª¤1ï¼šè¯´æ˜ç›®çš„
        step1 = ...
        # å…³é”®æ­¥éª¤2ï¼šè¯´æ˜ç›®çš„
        step2 = ...
        return step1 + step2
```

### é¡µé¢å®ç°æ¨¡æ¿
æ¯ä¸ªé¡µé¢åº”æœ‰ç»Ÿä¸€çš„ç»“æ„ï¼š

```python
"""
é¡µé¢åç§° - é¡µé¢è¯´æ˜
-------------------
è¿™ä¸ªé¡µé¢çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯...

åŠŸèƒ½åˆ—è¡¨ï¼š
- åŠŸèƒ½1
- åŠŸèƒ½2
- åŠŸèƒ½3

ä½¿ç”¨çš„ä¸»è¦ç»„ä»¶å’ŒæœåŠ¡ï¼š
- ç»„ä»¶A
- æœåŠ¡B
"""

import streamlit as st
from src.config import get_config
from src.services.xxx import get_xxx_client
from src.business.xxx import SomeService
from src.components.xxx import xxx_component

# é…ç½®
config = get_config()
logger = get_logger(__name__)

def show():
    """æ˜¾ç¤ºé¡µé¢ä¸»å‡½æ•°

    è¿™æ˜¯Streamlité¡µé¢çš„ä¸»å…¥å£ï¼Œç”±app.pyè°ƒç”¨ã€‚
    è´Ÿè´£ï¼š
    1. é¡µé¢æ ‡é¢˜å’Œä»‹ç»
    2. å¸ƒå±€è®¾è®¡
    3. ç”¨æˆ·äº¤äº’
    4. æ•°æ®å¤„ç†å’Œå±•ç¤º
    """
    st.title("ğŸ” é¡µé¢æ ‡é¢˜")

    # ç¬¬1æ­¥ï¼šåˆå§‹åŒ–å’Œé…ç½®
    _init_page_state()

    # ç¬¬2æ­¥ï¼šæ„å»ºUIå¸ƒå±€
    _build_search_panel()
    _build_results_panel()

    # ç¬¬3æ­¥ï¼šå¤„ç†äº¤äº’
    _handle_interactions()

def _init_page_state():
    """åˆå§‹åŒ–é¡µé¢ä¼šè¯çŠ¶æ€"""
    # è¯´æ˜æ¯ä¸ªsessionå˜é‡çš„ä½œç”¨
    pass

def _build_search_panel():
    """æ„å»ºæœç´¢é¢æ¿

    åŒ…å«ï¼š
    - æœç´¢æ¡†
    - è¿‡æ»¤æ¡ä»¶
    - æäº¤æŒ‰é’®
    """
    pass

def _build_results_panel():
    """æ„å»ºç»“æœå±•ç¤ºé¢æ¿

    åŒ…å«ï¼š
    - ç»“æœåˆ—è¡¨
    - åˆ†é¡µæ§åˆ¶
    - è¯¦æƒ…å±•ç¤º
    """
    pass

def _handle_interactions():
    """å¤„ç†ç”¨æˆ·äº¤äº’

    ç›‘å¬ç”¨æˆ·æ“ä½œï¼š
    - æœç´¢æäº¤
    - ç»“æœç‚¹å‡»
    - è¯¦æƒ…æ“ä½œ
    """
    pass
```

---

## ğŸ“ é—®é¢˜åé¦ˆå’Œè·Ÿè¿›

å¦‚åœ¨å®ç°è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·è®°å½•ï¼š
- é—®é¢˜æè¿°
- ç›¸å…³æ–‡ä»¶å’Œè¡Œå·
- é”™è¯¯ä¿¡æ¯
- å°è¯•çš„è§£å†³æ–¹æ¡ˆ

---

**æœ¬æ–‡æ¡£å®šæœŸæ›´æ–°ï¼Œè®°å½•å¼€å‘è¿›åº¦å’Œè®¡åˆ’è°ƒæ•´ã€‚**
